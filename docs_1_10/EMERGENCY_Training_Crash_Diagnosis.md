# ğŸš¨ ç´§æ€¥: è®­ç»ƒå´©æºƒè¯Šæ–­ä¸ä¿®å¤

**æ—¶é—´**: 2026-01-10  
**é—®é¢˜**: è®­ç»ƒåœ¨è¿­ä»£2635å’Œ2888æ—¶å‡ºç°å¼‚å¸¸  
**ä¸¥é‡æ€§**: ğŸ”´ **ä¸¥é‡** - éœ€è¦ç«‹å³ä¿®å¤

---

## ğŸ”´ **é—®é¢˜è¯Šæ–­**

### ä»æ—¥å¿—çœ‹åˆ°çš„å¼‚å¸¸

#### è¿­ä»£2635æ—¶
```
Mean reward: -2448.27  â† âŒ ä»+50å´©åˆ°-2448ï¼
Mean episode length: 101.70  â† âŒ ä»800+æ‰åˆ°100ï¼
Value function loss: 9977841.5500  â† âŒ è¿™æ˜¯ä¸ªå·¨å¤§çš„æ•°å­—ï¼
Episode Reward/pen_action_smoothness: -137.9453  â† è¿™ä¸ªçˆ†ç‚¸äº†ï¼
Episode Termination/base_contact: 18.3750  â† å¤§é‡æœºå™¨äººæ‘”å€’ï¼
```

#### è¿­ä»£2888æ—¶
```
Mean reward: -1299.52  â† ä»ç„¶æ˜¯å¤§è´Ÿæ•°
Mean episode length: 120.20  â† ä»ç„¶å¾ˆçŸ­
Value function loss: 3983383.5625  â† ä»ç„¶å·¨å¤§ï¼
Episode Reward/pen_action_smoothness: -66.4430  â† ä»åœ¨çˆ†ç‚¸
Episode Termination/base_contact: 17.5000  â† æœºå™¨äººæŒç»­æ‘”å€’
```

---

## ğŸ” **æ ¹æœ¬åŸå› åˆ†æ**

### é—®é¢˜é“¾æ¡

```
æ¢¯åº¦çˆ†ç‚¸
  â†“
å‚æ•°å˜å¾—ä¸ç¨³å®š/äº§ç”Ÿæç«¯å€¼
  â†“
æ¨¡å‹è¾“å‡ºæç«¯çš„action (å¹…åº¦å¤ªå¤§)
  â†“
actionå˜åŒ–å¹…åº¦å·¨å¤§
  â†“
pen_action_smoothnessæƒ©ç½šçˆ†ç‚¸ (-137.9)
  â†“
æœºå™¨äººæ‘”å€’ (base_contact: 18.37)
  â†“
rewardå˜æˆå¤§è´Ÿæ•° (-2448)
  â†“
episodeå¿«é€Ÿç»“æŸ (101 steps vs 800+ before)
```

### æœ€å¯èƒ½çš„åŸå› 

**âŒ å€™é€‰åŸå› 1: pen_action_smoothnessæƒé‡è®¾ç½®é”™è¯¯**

ä»æ—¥å¿—çœ‹ï¼Œè¿™ä¸ªæƒ©ç½šé¡¹çš„è´¡çŒ®ä»æ­£å¸¸çš„ -0.05å·¦å³ è·³åˆ° -137.9ï¼

è¿™é€šå¸¸æ˜¯å› ä¸ºï¼š
```python
# âŒ é”™è¯¯çš„è®¾ç½®
pen_action_smoothness = RewTerm(
    func=mdp.ActionSmoothnessPenalty,
    weight=-1.0 or -10.0 orå…¶ä»–å¤§å€¼  # â† å¤ªå¤§ï¼
)

# âœ… æ­£ç¡®çš„è®¾ç½®åº”è¯¥æ˜¯
pen_action_smoothness = RewTerm(
    func=mdp.ActionSmoothnessPenalty,
    weight=-0.05  # å°å€¼
)
```

**âŒ å€™é€‰åŸå› 2: æ¢¯åº¦æ²¡æœ‰è¢«æ­£ç¡®è£å‰ª**

åœ¨PPOé…ç½®ä¸­ï¼š
```python
max_grad_norm = 1.0  # åº”è¯¥æ£€æŸ¥è¿™ä¸ª
```

å¦‚æœæ¢¯åº¦è£å‰ªå¤±æ•ˆï¼Œä¼šå¯¼è‡´å‚æ•°æ›´æ–°è¿‡å¤§ã€‚

**âŒ å€™é€‰åŸå› 3: å­¦ä¹ ç‡è¡°å‡è®¾ç½®é—®é¢˜**

```python
learning_rate: 0.001  # è¿™ä¸ªé€šå¸¸æ˜¯å¯¹çš„
schedule: "adaptive"   # ä½†scheduleå¯èƒ½æœ‰é—®é¢˜
```

**âŒ å€™é€‰åŸå› 4: å€¼å‡½æ•°ç½‘ç»œä¸ç¨³å®š**

Value function loss: 9977841.5500 è¿™ä¸ªæ•°å­—éå¸¸å¤§ï¼Œè¯´æ˜å€¼å‡½æ•°è¯„ä¼°å®Œå…¨é”™è¯¯ã€‚

---

## âœ… **å¿«é€Ÿä¿®å¤æ–¹æ¡ˆ**

### æ–¹æ¡ˆA: ç«‹å³åœæ­¢å¹¶æ£€æŸ¥ (æ¨è)

```bash
# åœæ­¢å½“å‰è®­ç»ƒ (Ctrl+C)

# æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„é…ç½®
cat logs/rsl_rl/pf_task2_3_flat/[latest]/config.py | grep -A 5 "action_smooth"

# æˆ–è€…ç›´æ¥æ£€æŸ¥æºä»£ç ä¸­çš„æƒé‡
grep -n "pen_action_smoothness" exts/bipedal_locomotion/bipedal_locomotion/tasks/locomotion/cfg/PF/limx_base_env_cfg.py
```

### æ–¹æ¡ˆB: å¦‚æœä¸æƒ³åœæ­¢ï¼Œä»ä¹‹å‰çš„checkpointæ¢å¤

```bash
# å¦‚æœæ¨¡å‹åœ¨è¿­ä»£2500æ—¶è¿˜æ˜¯å¥½çš„ï¼ŒåŠ è½½é‚£ä¸ª
python scripts/rsl_rl/train.py \
  --task Isaac-Limx-PF-Task2-3-v0 \
  --num_envs 2048 \
  --headless \
  --resume \
  --load_run 2026-01-10_14-45-30_Task2-3_Corrected_Weights_v1 \
  --checkpoint model_2500.pt \
  --run_name Task2-3_Corrected_Weights_v1_Resumed
```

è¿™ä¼šä»model_2500.ptæ¢å¤ï¼Œç»§ç»­è®­ç»ƒå‰©ä½™çš„500æ¬¡è¿­ä»£ã€‚

---

## ğŸ”§ **éœ€è¦æ£€æŸ¥çš„é…ç½®**

### æ£€æŸ¥é¡¹1: pen_action_smoothnessæƒé‡

**æ–‡ä»¶**: `limx_base_env_cfg.py`

```bash
grep -n "pen_action_smoothness" exts/bipedal_locomotion/bipedal_locomotion/tasks/locomotion/cfg/PF/limx_base_env_cfg.py
```

çœ‹è¿™ä¸€è¡Œï¼š
```python
pen_action_smoothness = RewTerm(
    func=mdp.ActionSmoothnessPenalty,
    weight=-0.04  # â† åº”è¯¥æ˜¯è¿™æ ·ï¼Œä¸èƒ½æ˜¯-1.0æˆ–æ›´å¤§
)
```

å¦‚æœæƒé‡ä¸å¯¹ï¼Œæ”¹ä¸º `-0.04` æˆ– `-0.05`

### æ£€æŸ¥é¡¹2: æ¢¯åº¦è£å‰ª

**æ–‡ä»¶**: `limx_rsl_rl_ppo_cfg.py`

```python
max_grad_norm = 1.0  # â† æ£€æŸ¥è¿™ä¸ªæ˜¯å¦å­˜åœ¨
```

å¦‚æœæ²¡æœ‰æˆ–è€…å¤ªå°ï¼Œå¯èƒ½å¯¼è‡´æ¢¯åº¦çˆ†ç‚¸ã€‚

### æ£€æŸ¥é¡¹3: å­¦ä¹ ç‡å’Œschedule

```python
learning_rate = 1.0e-3  # é€šå¸¸è¿™ä¸ªOK
schedule = "adaptive"   # è¿™ä¸ªä¹Ÿåº”è¯¥OK
```

---

## ğŸ“Š **TensorBoardçœ‹åˆ°çš„æƒ…å†µ**

ä»ä½ ä¸Šä¼ çš„å›¾è¡¨çœ‹ï¼š

```
Train/mean_reward:
  0-2000è¿­ä»£: ç¨³å®šåœ¨ 45-55
  2000-2600: é€æ¸ä¸‹é™ï¼Œå‡ºç°æ³¢åŠ¨
  2600+: å´©æºƒåˆ° -2448 âŒ

Train/mean_episode_length:
  0-2000è¿­ä»£: ç¨³å®šåœ¨ 750-800
  2000-2600: ä¿æŒç¨³å®š ~800
  2600+: å´©æºƒåˆ° ~100 âŒ
```

è¿™ä¸æ˜¯gradual decayï¼Œè€Œæ˜¯**çªç„¶å´©æºƒ**ï¼è¯´æ˜æ˜¯æŸä¸ªå‚æ•°/æƒé‡çªç„¶å˜åäº†ã€‚

---

## ğŸ¯ **æˆ‘çš„å»ºè®® (ä¼˜å…ˆçº§)**

### 1ï¸âƒ£ **ç«‹å³åœæ­¢è®­ç»ƒ** âš ï¸

```bash
Ctrl+C  # åœæ­¢å½“å‰è®­ç»ƒ
```

### 2ï¸âƒ£ **æ£€æŸ¥pen_action_smoothnessæƒé‡**

è¿™ä¸ªæœ€å¯ç–‘ã€‚æ—¥å¿—æ˜¾ç¤ºï¼š
- è¿­ä»£2635: -137.9453 â† å¼‚å¸¸é«˜
- è¿­ä»£2888: -66.4430 â† ä»åœ¨å¼‚å¸¸

é€šå¸¸è¿™ä¸ªåº”è¯¥æ˜¯ -0.04 æˆ– -0.05ã€‚

### 3ï¸âƒ£ **å¦‚æœæƒé‡æ²¡é—®é¢˜ï¼Œä»checkpointæ¢å¤**

```bash
python scripts/rsl_rl/train.py \
  --task Isaac-Limx-PF-Task2-3-v0 \
  --num_envs 2048 \
  --headless \
  --resume \
  --load_run 2026-01-10_14-45-30_Task2-3_Corrected_Weights_v1 \
  --checkpoint model_2500.pt
```

### 4ï¸âƒ£ **ç›‘æ§æ–°çš„è®­ç»ƒ**

é‡æ–°å¯åŠ¨åï¼Œçœ‹æ˜¯å¦è¿˜ä¼šåœ¨åŒä¸€ä½ç½®å´©æºƒã€‚

---

## ğŸ“‹ **å¿«é€Ÿæ£€æŸ¥æ¸…å•**

- [ ] åœæ­¢å½“å‰è®­ç»ƒ
- [ ] æŸ¥çœ‹pen_action_smoothnessæƒé‡æ˜¯å¦æ­£ç¡® (åº”è¯¥æ˜¯ -0.04 or -0.05)
- [ ] æ£€æŸ¥max_grad_normè®¾ç½®
- [ ] ä»model_2500.ptæ¢å¤è®­ç»ƒ
- [ ] ç›‘æ§æ–°è®­ç»ƒä¸­æ˜¯å¦å†æ¬¡å‡ºç°å´©æºƒ
- [ ] å¦‚æœè¿˜æ˜¯å´©æºƒï¼Œå‡å°å­¦ä¹ ç‡åˆ°0.0005

---

## ğŸ†˜ **å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨**

å¯èƒ½éœ€è¦ï¼š

1. **é™ä½å­¦ä¹ ç‡**
   ```python
   learning_rate = 0.0005  # ä»0.001é™åˆ°0.0005
   ```

2. **å¢åŠ æ¢¯åº¦è£å‰ª**
   ```python
   max_grad_norm = 0.5  # ä»1.0é™åˆ°0.5
   ```

3. **å‡å°action_smoothnessæƒé‡**
   ```python
   weight = -0.01  # ä»-0.04é™åˆ°-0.01
   ```

4. **é‡æ–°å¯åŠ¨è®­ç»ƒ (æœ€åæ‰‹æ®µ)**
   ```bash
   python scripts/rsl_rl/train.py \
     --task Isaac-Limx-PF-Task2-3-v0 \
     --num_envs 2048 \
     --headless \
     --run_name Task2-3_Corrected_Weights_v2_Fresh
   ```

---

## âš ï¸ **ä¸è¦åšçš„äº‹æƒ…**

âŒ ä¸è¦ç»§ç»­è®­ç»ƒ (ä¼šè¶Šæ¥è¶Šå)  
âŒ ä¸è¦å¿½è§†è¿™ä¸ªé—®é¢˜  
âŒ ä¸è¦å¢åŠ å­¦ä¹ ç‡  
âŒ ä¸è¦å¢åŠ æƒ©ç½šé¡¹æƒé‡

---

**ç°åœ¨éœ€è¦ä½ æä¾›æ›´å¤šä¿¡æ¯:**

1. â“ ä½ åœ¨è¿­ä»£2600å‰æ”¹è¿‡ä»€ä¹ˆä»£ç å—ï¼Ÿ
2. â“ ä½ æ”¹äº†å¥–åŠ±é¡¹æƒé‡å—ï¼Ÿ
3. â“ æˆ–è€…è¿™æ˜¯å®Œå…¨è‡ªåŠ¨è¿è¡Œçš„ï¼Œæ²¡æœ‰äººå·¥å¹²é¢„ï¼Ÿ

å‘Šè¯‰æˆ‘è¿™äº›ä¿¡æ¯ï¼Œæˆ‘å¯ä»¥æ›´ç²¾ç¡®åœ°å®šä½é—®é¢˜ï¼

